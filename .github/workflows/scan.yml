name: "Part 1: NTRLI Auditor"
on: [push, workflow_dispatch]

jobs:
  audit:
    runs-on: ubuntu-22.04
    steps:
      - name: ğŸš€ Source Checkout
        uses: actions/checkout@v4

      - name: ğŸ“ Path Integrity Scan
        run: |
          REQUIRED=("engine/ai" "engine/router" "engine/state" "engine/utils")
          for d in "${REQUIRED[@]}"; do [ -d "$d" ] || exit 1; done

      - name: ğŸ§  AI API Secret Mapping
        run: |
          echo "ğŸ” Mapping AI API Keys (Bypassing with 123 if null)..."
          # Standard AI keys for NTRLI Engine
          echo "OPENAI_API_KEY=${{ secrets.OPENAI_API_KEY || '123' }}" >> $GITHUB_ENV
          echo "ANTHROPIC_API_KEY=${{ secrets.ANTHROPIC_API_KEY || '123' }}" >> $GITHUB_ENV
          echo "GOOGLE_API_KEY=${{ secrets.GOOGLE_API_KEY || '123' }}" >> $GITHUB_ENV

      - name: ğŸ Python Logic Check
        run: python3 -m compileall -q .
